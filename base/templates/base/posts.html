{% extends 'base/main.html' %}
{% load static %}

{% block head-links %} 
    <link rel="stylesheet" href="{% static 'css/posts.css' %}">
{% endblock %}

{% block content %}



<section class="projects">
    <div class="projects-container">
        <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Search here..">
        <div id="projects" class="projects-wraper">
            {% for post in posts%}
            <article>
                <div class="post">
                    <img class="thumbnail" src="{{post.thumbnail.url}}">
                    <div class="post-preview">
                        <h3 class="post-title">{{post.headline}}</h3>
                        <p class="post-intro">{{post.sub_headline}}</p>
                        <a href="{% url 'post' post.id %}">Read More</a>

                        <hr>
                        {% for tag in post.tags.all %}
                            <span class="tags">{{tag}}</span>
                        {% endfor %}
                    </div>
                </div>
            </article>
            {% empty %}
                <h3>No posts found...</h3>
            {% endfor %}

        </div>
    </div>
</section>

{% endblock %}

{% block scripts %}
<script>
    function myFunction() {
      // Declare variables
      var input, filter, project, post, h3, i, txtValue;
      input = document.getElementById("myInput");
      filter = input.value.toUpperCase();
      project = document.getElementById("projects");
      post = project.getElementsByTagName("article");
    
      // Loop through all table rows, and hide those who don't match the search query
      for (i = 0; i < post.length; i++) {
        h3 = post[i].getElementsByTagName("h3")[0];
        if (h3) {
          txtValue = h3.textContent || h3.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            post[i].style.display = "";
          } else {
            post[i].style.display = "none";
          }
        }
      }
    }
</script>
{% endblock scripts %}